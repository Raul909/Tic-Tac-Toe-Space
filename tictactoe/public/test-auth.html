<!DOCTYPE html>
<html>
<head>
<title>Auth Test</title>
</head>
<body>
<h1>Registration Test</h1>
<input id="username" placeholder="Username" value="testuser456">
<input id="password" type="password" placeholder="Password" value="password123">
<button onclick="testRegister()">Register</button>
<button onclick="testLogin()">Login</button>
<pre id="result"></pre>

<script>
async function testRegister() {
  const result = document.getElementById('result');
  try {
    const response = await fetch('/api/register', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      credentials: 'include',
      body: JSON.stringify({
        username: document.getElementById('username').value,
        password: document.getElementById('password').value
      })
    });
    const data = await response.json();
    result.textContent = 'Register Response:\n' + JSON.stringify(data, null, 2);
    console.log('Cookies:', document.cookie);
  } catch (error) {
    result.textContent = 'Error: ' + error.message;
  }
}

async function testLogin() {
  const result = document.getElementById('result');
  try {
    const response = await fetch('/api/login', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      credentials: 'include',
      body: JSON.stringify({
        username: document.getElementById('username').value,
        password: document.getElementById('password').value
      })
    });
    const data = await response.json();
    result.textContent = 'Login Response:\n' + JSON.stringify(data, null, 2);
    console.log('Cookies:', document.cookie);
  } catch (error) {
    result.textContent = 'Error: ' + error.message;
  }
}
</script>
</body>
</html>
